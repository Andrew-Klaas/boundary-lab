slug: klaas-boundary-sandbox
id: fmjg5mbiv8rw
version: 0.0.1
title: Klaas-(WIP) Test Boundary PKI Workers and Target Types (Unfinished)
teaser: (WIP) Boundary Demo env (NOT READY)
description: (WIP) Test Boundary PKI Workers and Target Types
icon: https://storage.googleapis.com/instruqt-hashicorp-tracks/logo/HashiCorp_Icon_Black.png
tags:
- Vault
- Boundary
owner: hashicorp
developers:
- aklaas@hashicorp.com
private: true
published: false
maintenance: true
challenges:
- slug: 01-boundary-worker-setup
  id: efkilv6revt0
  type: challenge
  title: Configure Boundary and Vault
  teaser: Configure Vault to issue credentials for Boundary.
  notes:
  - type: text
    contents: Boundary provides a secure way to access hosts and critical systems
      without having to manage credentials or expose your network.
  assignment: |-
    ```
    export BOUNDARY_ADDR="https://ad2ed0........d081c40.boundary.hashicorp.cloud"
    export TF_VAR_boundary_addr=${BOUNDARY_ADDR}
    ```

    ```
    export ADMIN_USER=....
    export TF_VAR_auth_method_id=ampw_ZYRq6....
    ```

    ```
    boundary authenticate password -auth-method-id=${TF_VAR_auth_method_id} -login-name=$ADMIN_USER
    ```

    ```
    export BOUNDARY_TOKEN=
    ```

    ```
    boundary workers create controller-led -name instruqt-demo -token env://BOUNDARY_TOKEN
    ```

    ```
    vi /etc/boundary.d/pki-worker.hc
    ```

    ```
    systemctl restart boundary-worker
    ```

    ```
    vault login -method=userpass username=vault password=vault
    export VAULT_TOKEN=$(vault token create \
      -no-default-policy=true \
      -policy="vault_admin" \
      -orphan=true \
      -period=20m \
      -renewable=true \
      -format=json | jq -r .auth.client_token)
    export TF_VAR_vault_token=${VAULT_TOKEN}
    ```
    ```
    terraform init -upgrade
    terraform init
    ```
  tabs:
  - title: Boundary Worker
    type: terminal
    hostname: boundary-worker
  - title: Vault UI
    type: service
    hostname: vault-sql-server
    port: 8200
  - title: Vault & SQL Server
    type: terminal
    hostname: vault-sql-server
  - title: Windows Server
    type: terminal
    hostname: windows-server
  - title: Terraform Editor
    type: code
    hostname: boundary-worker
    path: /root/terraform-boundary/main.tf
  - title: Boundary Worker Editor
    type: code
    hostname: boundary-worker 
    path: /etc/boundary.d/pki-worker.hcl
  difficulty: basic
  timelimit: 6000
checksum: "9158219211158133252"
